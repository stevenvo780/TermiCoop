## Alta
- Onboarding y cambio de contraseña rotos: la UI intenta `POST /api/auth/setup` y `/api/auth/password`, pero el backend solo expone login/register, así que en una instalación sin usuarios el flujo de configuración inicial responde 404 y el cambio de clave nunca funciona (`client/src/App.tsx:1350-1386`, `nexus/src/routes/auth.routes.ts:7-10`).
- Protocolo de sockets incompleto: el cliente re-intenta suscribirse con eventos `join-session`, `session-list` y `get-session-output`, pero el servidor no implementa ninguno; la restauración de sesiones y el resync tras reconexión nunca suceden (`client/src/App.tsx:318-380`, `nexus/src/socket.ts:75-145`). También falta procesamiento de `session-shell-exited`/`kill-session`, así que los cierres no se reflejan.
- Registro abierto aunque se declare un token de setup: el endpoint `/api/auth/register` no valida `NEXUS_SETUP_TOKEN` ni bloquea registros tras crear el admin inicial, por lo que cualquiera puede darse de alta incluso cuando `status` indica que se requiere token (`nexus/src/controllers/auth.controller.ts:20-49`).

## Media
- API divergente respecto a pruebas/clients previos: las pruebas automáticas hacen login solo con password y esperan eventos `worker-list`/`register`, que el backend ya no maneja; actualmente fallan desde antes de ejecutar lógica real (`tests/e2e.test.ts:19-56`, `tests/multi-client.test.ts:19-63`, `nexus/src/controllers/auth.controller.ts:6-18`, `nexus/src/socket.ts:34-143`).
- Heartbeats ignorados: el worker emite `heartbeat` cada 5s pero el servidor no los consume, por lo que `last_seen` no se actualiza y un worker colgado pero con socket abierto seguirá apareciendo “online” (`worker/src/index.ts:84-93`, `nexus/src/socket.ts:75-143`). Manejar el evento permitiría marcar caídas sin esperar un disconnect.
- Borrado de workers sin validar estado: el backend borra el worker aun si está online, dejando sesiones activas cortadas sin aviso; la UI lo impide, pero una llamada directa a la API lo elimina igual (`nexus/src/controllers/worker.controller.ts:36-50`). Conviene rechazar si `status` es online o forzar un cierre limpio antes de borrar.
